<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@100&display=swap" rel="stylesheet">
  <link rel="stylesheet"
  href="https://fonts.sandbox.google.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <title>CRUD</title>
  <style>
    input[type='submit'], button, [aria-label]{
      cursor: pointer;
    }
    #spoiler{
      display: none;
    }
  </style>
</head>
<body class="body" >
  <!-- Header-->
  <div>
    <header class="container-fluid">
      <div>
        <div class="logo" class="container-md">
          <div class="start">
            <p><span class="material-symbols-outlined">grade</span></p>
          </div>
          <div>
            <p>
            <a class="logotexto" href="https://luismelendezfuentes.github.io/solidgames/">SolidGames</a>
            </p>
          </div>
          <div class="nav" class="conteiner">
            <ul class="nav conteiner">
              <li><a href="https://luismelendezfuentes.github.io/PROYECTO-2-Aplicacion-CRUD/">CRUD</a></li>
              <li>PS4</li>
              <li>XBOX SERIES X</li>
              <li>SWITCH</a></li>
              <li>Registrate</li>
              <li>Inicio de sesión</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- body-->
      <div class="conteiner nav1">
        <h1 >Listado de tareas</h1><br>
        <p>Guarda las memorias de tu aventura</p>
      </div>

      <!--Formulario-->
<div class="form conteiner">
  <form action="javascript:void(0);" method="POST" onsubmit="app.Add()"> 
    <input type="text" id="add-name" placeholder="Escribe...">
    <input type="submit" value="Agregar" class="button3" >
  </form>
  
  <div id="spoiler" role="aria-hidden" class="conteiner">
    <form action="javascript:void(0);" method="POST" id="saveEdit">
      <input type="text" id="edit-name">
      <input type="submit" value="Edit" /> <a onclick="CloseInput()" aria-label="Close">&#10006;</a>
    </form>
  </div>
</div>
  <!--contador-->
<div class="conteiner contador">
  <p class="info" id="counter"></p>
</div>
  <div>

<!--Tabla-->
<div class="conteiner tabla">
<table class="conteiner">
  <tr>
    <th></th>
  </tr>
    <tbody id="tareas">
    </tbody>
</table>
</div>

<script>
var app = new function() {
  this.el = document.getElementById('tareas');
  this.tareas = [];
  this.Count = function(data) {
    var el   = document.getElementById('counter');
    var name = 'tareas';
    if (data) {
      if (data > 1) {
        name = 'tareas';
      }
      el.innerHTML = data + ' ' + name ;
    } else {
      el.innerHTML = 'Sin ' + name;
    }
  };
  
  this.FetchAll = function() {
    var data = '';
    if (this.tareas.length > 0) {
      for (i = 0; i < this.tareas.length; i++) {
        data += '<tr>';
        data += '<td>' + this.tareas[i] + '</td>';
        data += '<td><button onclick="app.Edit(' + i + ')">Edit</button></td>';
        data += '<td><button onclick="app.Delete(' + i + ')">Delete</button></td>';
        data += '</tr>';
      }
    }
    this.Count(this.tareas.length);
    return this.el.innerHTML = data;
  };
  this.Add = function () {
    el = document.getElementById('add-name');
    // Get the value
    var country = el.value;
    if (country) {
      // Add the new value
      this.tareas.push(country.trim());
      // Reset input value
      el.value = '';
      // Dislay the new list
      this.FetchAll();
    }
    let tarea = [localStorage.setItem("Tarea", country)];
  };
  this.Edit = function (item) {
    var el = document.getElementById('edit-name');
    // Display value in the field
    el.value = this.tareas[item];
    // Display fields
    document.getElementById('spoiler').style.display = 'block';
    self = this;
    document.getElementById('saveEdit').onsubmit = function() {
      // Get value
      var country = el.value;
      if (country) {
        // Edit value
        self.tareas.splice(item, 1, country.trim());
        // Display the new list
        self.FetchAll();
        // Hide fields
        CloseInput();
      }
    }
  };
  this.Delete = function (item) {
    // Delete the current row
    this.tareas.splice(item, 1);
    // Display the new list
    this.FetchAll();
  };
  
}
app.FetchAll();
function CloseInput() {
  document.getElementById('spoiler').style.display = 'none';
}

</script>
</div>

 <!--Foother-->
 <div class="footer-basic conteiner">
    <footer>
      <div class="social"><a href="#"><i class="icon ion-social-instagram"></i></a><a href="#"><i
            class="icon ion-social-snapchat"></i></a><a href="#"><i class="icon ion-social-twitter"></i></a><a
          href="#"><i class="icon ion-social-facebook"></i></a></div>
      <ul class="list-inline">
        <li class="list-inline-item"><a href="#">Inicio</a></li>
        <li class="list-inline-item"><a href="#">Servicios</a></li>
        <li class="list-inline-item"><a href="#">Sobre nosotros</a></li>
        <li class="list-inline-item"><a href="#">Terminos</a></li>
        <li class="list-inline-item"><a href="#">Politica de Privacidad</a></li>
      </ul>
      <p class="copyright">Solid Games © 2018</p>
    </footer>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

</body>
</html>